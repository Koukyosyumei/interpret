{
    "$id": "https://interpret.ml/schemas/ebm",
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "type": "object",
    "properties": {
        "version": {
            "type": "array",
            "items": [
            {
                "type": "number",
                "minimum": 0
            },
            {
                "type": "number",
                "minimum": 0
            },
            {
                "type": "number",
                "minimum": 0
            }
            ],
            "minItems": 3,
            "maxItems": 3
        },
        "learner": {
            "type": "object",
            "properties": {
                "features": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/feature"
                    }
                },
                "interpretable_ebm": {
                    "type": "object",
                    "properties": {
                        "task" : {
                            "oneOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "type": { "const": "regression" }
                                    }
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "type": { "const": "classification" },
                                        "classes": {
                                            "type": "array",
                                            "items": {
                                                "type": "number"
                                            },
                                            "minItems": 2
                                        }
                                    }
                                }
                            ]
                        },
                        "intercept" : { "type": "number" },
                        "additive_terms": {
                            "type": "array",
                            "items": {
                                "type": "array",
                                "items": {
                                    "type": "number"
                                }
                            }
                        },
                        "standard_deviations": {
                            "type": "array",
                            "items": {
                                "type": "array",
                                "items": {
                                    "type": "number"
                                }
                            }
                        },
                        "interactions": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 0
                        },
                        "feature_groups": {
                            "type": "object",
                            "properties": {
                                "groups": {
                                    "type": "array",
                                    "items": {
                                        "type": "array",
                                        "items": {
                                            "type": "number"
                                        }
                                    }
                                },
                                "importances": {
                                    "type": "array",
                                    "items": {
                                        "type": "number"
                                    }
                                },
                                "mins": {
                                    "type": "object",
                                    "patternProperties": {
                                        "^[0-9]*$": {
                                            "type": "number"
                                        }
                                    },
                                    "additionalProperties": false
                                },
                                "maxes": {
                                    "type": "object",
                                    "patternProperties": {
                                        "^[0-9]*$": {
                                            "type": "number"
                                        }
                                    },
                                    "additionalProperties": false
                                },
                                "bin_edges": {
                                    "type": "object",
                                    "patternProperties": {
                                        "^[0-9]*$": {
                                            "type": "array",
                                            "items": {
                                                "type": "number"
                                            }
                                        }
                                    },
                                    "additionalProperties": false
                                },
                                "hist_edges": {
                                    "type": "object",
                                    "patternProperties": {
                                        "^[0-9]*$": {
                                            "type": "array",
                                            "items": {
                                                "type": "number"
                                            }
                                        }
                                    },
                                    "additionalProperties": false
                                },
                                "hist_counts": {
                                    "type": "object",
                                    "patternProperties": {
                                        "^[0-9]*$": {
                                            "type": "array",
                                            "items": {
                                                "type": "number"
                                            }
                                        }
                                    },
                                    "additionalProperties": false
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "required": [
        "version",
        "learner"
    ],
    "definitions": {
        "feature": {
            "type": "object",
            "properties": {
                "name": { "type" : "string" },
                "type": { "type" : "string" },
                "num_unique": { "type" : "number" },
                "percent_non_zero": { "type" : "number" }
            },
            "required": ["name", "type", "num_unique", "percent_non_zero"]
        }
    }
}